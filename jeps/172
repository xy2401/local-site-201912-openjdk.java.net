<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=us-ascii" /><meta http-equiv="Content-Type" content="text/html; charset=us-ascii" /><title>JEP 172: DocLint</title><link rel="shortcut icon" href="/images/nanoduke.ico" /><link rel="stylesheet" type="text/css" href="/page.css" /><script type="text/javascript" src="/page.js"><noscript></noscript></script><style type="text/css" xml:space="preserve">
      TABLE { border-collapse: collapse; padding: 0px; margin: 1em 0; }
      TR:first-child TH, TR:first-child TD { padding-top: 0; }
      TH, TD { padding: 0px; padding-top: .5ex; vertical-align: baseline; text-align: left; }
      TD + TD, TH + TH { padding-left: 1em; }
      TD:first-child, TH:first-child, TD.jep { text-align: right; }
      TABLE.head TD:first-child { font-style: italic; padding-left: 2em; }
      PRE { padding-left: 2em; margin: 1ex 0; font-size: inherit; }
      TABLE PRE { padding-left: 0; margin: 0; }
      TABLE.jeps TD:first-child + TD,
      TABLE.jeps TD:first-child + TD + TD { padding-left: .5em; }
      TABLE.jeps TD:first-child,
      TABLE.jeps TD:first-child + TD,
      TABLE.jeps TD:first-child + TD + TD { font-size: smaller; }
      TABLE.jeps TD.cl { font-size: smaller; padding-right: 0; text-align: right; }
      TABLE.jeps TD.cm { font-size: smaller; padding-left: .1em; padding-right: .1em; }
      TABLE.jeps TD.cr { font-size: smaller; padding-left: 0; }
      TABLE.jeps TD.z { padding-left: 0; padding-right: 0; }
      TABLE.head TD { padding-top: 0; }
      .withdrawn { text-decoration: line-through; }
    </style></head><body><div id="main"><h1>JEP 172: DocLint</h1><table class="head"><tr><td>Owner</td><td>Jonathan Gibbons</td></tr><tr><td>Type</td><td>Feature</td></tr><tr><td>Scope</td><td>JDK</td></tr><tr><td>Status</td><td>Closed&#8201;/&#8201;Delivered</td></tr><tr><td>Release</td><td>8</td></tr><tr><td>Component</td><td>tools&#8201;/&#8201;javadoc(tool)</td></tr><tr><td>Discussion</td><td>javadoc dash dev at openjdk dot java dot net</td></tr><tr><td>Effort</td><td>XS</td></tr><tr><td>Duration</td><td>XS</td></tr><tr><td>Depends</td><td><a href="105">JEP 105: DocTree API</a></td></tr><tr><td>Endorsed by</td><td>Mark Reinhold</td></tr><tr><td>Created</td><td>2012/11/30 20:00</td></tr><tr><td>Updated</td><td>2016/06/07 16:03</td></tr><tr><td>Issue</td><td><a href="https://bugs.openjdk.java.net/browse/JDK-8046162">8046162</a></td></tr></table><div class="markdown"><h2 id="Summary">Summary</h2>
<p>Provide a means to detect errors in Javadoc comments early in the
development cycle and in a way that is easily linked back to the
source code.</p>
<h2 id="Goals">Goals</h2>
<p>The <code>javadoc</code> tool currently provides little to no checking of the
content of Javadoc comments, and what checking it does provide does not
link back to the source code, and is typically overlooked by developers.
As a result, errors are typically propagated into the generated
documentation files which can affect the specifications in those files.
We need better tools to help detect more errors, earlier, such that
reported issues are easy to fix.</p>
<p>Typical errors can be grouped into various categories:</p>
<ul>
<li>Bad syntax, such as unescaped characters ("&lt;") or unmatched
parentheses ("{@foo")</li>
<li>Bad HTML, such as invalid or missing tags or attributes</li>
<li>Bad references, such as referencing a non-existent type with @see,
or a non-existent parameter with @param</li>
<li>Accessibility errors, such as a missing summary or caption from a
table</li>
<li>Missing info, such as an undocumented parameter</li>
</ul>
<p>The goal is to detect and report the majority of common errors made by
developers writing Javadoc comments, such that the generated output files
will generally pass external validation tools, such as HTML and
accessibility conformance tools.</p>
<p>Any errors should be reported in a way similar to that of common
compilers, such that the messages can easily be consumed by suitable
editors and IDEs, to help developers easily locate and fix the errors.</p>
<p>A user should be able to configure the tool to select or restrict the
checks that are made. For example, only report instances of bad syntax,
or only report errors on public and protected methods.</p>
<h2 id="Non-Goals">Non-Goals</h2>
<p>It is not a goal to detect all issues such that we can guarantee that the
generated documentation will pass any nominated validation tool.</p>
<h2 id="Motivation">Motivation</h2>
<p>The API specifications for the Java SE platform are primarily based on
documents generated by the <code>javadoc</code> tool. Errors have been found in API
specifications that can be traced back to errors in the original Javadoc
comments. By providing tools to detect and report such errors in a timely
manner, we can reduce the risk of publishing incorrect specifications.</p>
<p>In addition, by ensuring that the output from the <code>javadoc</code> tool is
conformant to prevailing standards, we reduce the risk that it will not
work on some combinations of platform and browser.</p>
<p>These days it is generally regarded as important for generated
documentation to conform to accessibility guidelines, such as
Section&#160;508.  We need better tools to help detect probable errors at
a point in the development cycle when it is easy to fix such issues.</p>
<p>Existing formal tools, such as HTML and accessibility conformance
checkers can only be applied to the <em>output</em> of the <code>javadoc</code> tool. This
makes it hard to relate any error messages back to the position in the
original source text.  We need tools that can report errors in the
context of the original source.</p>
<h2 id="Description">Description</h2>
<p>The tool will build upon the "DocTree API" described in <a href="https://bugs.openjdk.java.net/browse/JDK-8046095">JEP 105</a>,
which itself an extension to the javac "Tree API" now available in the
<code>com.sun.source</code> package.  The DocTree API provides a way to get a
"syntax tree" for the elements of a Javadoc comment.</p>
<p>The tool will scan source files, looking for declarations that have
associated Javadoc comments. It will use the DocTree API to parse those
comments, and will then analyse the resulting AST looking for issues.</p>
<p>The tool could be made available in a number of ways.</p>
<ol>
<li>
<p>Since it is processing Javadoc comments, the natural way to present
the tool could be as a doclet. The user would specify to use the
doclet on the <code>javadoc</code> command line, using the existing <code>javadoc</code>
<code>-doclet</code> and <code>-docletpath</code> options.  The doclet would provide
additional options to select the categories of issue to be reported,
in a manner similar to the existing <code>javac -Xlint</code> option.</p>
<p>A variant of this option would be to "hard-wire" the tool into the
existing standard doclet. This allows a simpler way for a user to
invoke the tool, but does imply a performance penalty, since the
standard doclet does not yet utilize the DocTree API. (That would be
a laudable goal for a separate project.)  However, <code>javadoc</code> is
already slow (!!) and parsing comments with the DocTree API is fast,
so the perceived slow down may not be too onerous.</p>
<p>Either way, using the <code>javadoc</code> tool to generate documentation is
normally an afterthought that happens late in the tool chain.  Many
developers do not even run the tool, and so such a solution fails to
meet the goal of reporting issues in a timely manner.</p>
</li>
<li>
<p>The tool could be made available as a new standalone tool.  This
would imply additional work, such as providing a launcher, and
related man pages. Earlier experience with the <code>apt</code> annotation
processing tool has shown that it is hard to introduce a new tool
into the typical developer tool chain.</p>
</li>
<li>
<p>The tool could be "hooked into" javac, such that the developer can
choose to see messages about issues in Javadoc comments at the same
time that they see messages about issues in their source code. This
means that enabling the tool can be as easy as adding another option
to the javac command line. Since the tool will support configuration
options of its own, the use of the tool is not a binary choice that
can be added into the existing <code>javac -Xlint</code> mechanism.  Instead,
it is proposed that the tool will use a similar but different
option, <code>-Xdoclint</code> or <code>-Xdoclint:</code><em><code>args</code></em>.</p>
</li>
<li>
<p>The tool could also be hooked into an IDE like NetBeans, which
already uses a variant of <code>javac</code> to provide the feedback about
errors in the source editor window. Modifying the NetBeans source
editor is out of scope, but the tool should not preclude someone
else integrating the tool into IDEs such that we get "red squiggly
lines" for more than just spelling errors in Javadoc comments.</p>
</li>
</ol>
<p>It is expected that we will do some combination of options 1 and 3,
making the tool available via <code>javac</code> and <code>javadoc</code>.</p>
<h2 id="Alternatives">Alternatives</h2>
<p>The problem of ensuring that the <code>javadoc</code> tool generates valid HTML
output could be addressed by post-processing the output
semi-automatically through a tool like <code>htmltidy</code>.  However, generating
"clean" HTML from invalid input simply covers over the problem, and does
not help address the fundamental problem of finding (and fixing) the
errors in the original source text.</p>
<h2 id="Testing">Testing</h2>
<p>We should continue to run such formal validation tools as are available,
on documentation generated from the OpenJDK source code. We should then
check that any errors reported by those tools are also detected and
reported by the new tool.</p>
<h2 id="Risks-and-Assumptions">Risks and Assumptions</h2>
<p>If the feature is to be included in JDK 8, the primary risk is the
availability of resources. The mitigation plan would be to make the tool
available separately for now, for inclusion in a later release of the
platform.</p>
<h2 id="Dependences">Dependences</h2>
<p>Depends on <a href="https://bugs.openjdk.java.net/browse/JDK-8046095">JEP 105</a>, which is now available in JDK 8 build 66 (M5).</p>
<h2 id="Impact">Impact</h2>
<ul>
<li>Accessibility: Will help improve accessibility of our generated
documentation</li>
<li>Documentation: Will help improve conformance to HTML standards of our
generated documentation.</li>
</ul>
</div></div><div id="sidebar"><div id="openjdk-sidebar-logo"><a href="/"><img alt="OpenJDK logo" src="/images/openjdk-small.png" /></a></div><div class="links"><div class="links"><a href="/workshop"><b>Workshop</b></a></div></div><div class="links"><div class="link"><a href="/faq/">OpenJDK FAQ</a></div><div class="link"><a href="/install/">Installing</a></div><div class="link"><a href="/contribute/">Contributing</a></div><div class="link"><a href="/sponsor/">Sponsoring</a></div><div class="link"><a href="/guide/">Developers' Guide</a></div><div class="link"><a href="/groups/vulnerability/report">Vulnerabilities</a></div></div><div class="links"><div class="links"><a href="//mail.openjdk.java.net">Mailing lists</a></div><div class="link"><a href="/irc">IRC</a>
                      &#183; <a href="https://wiki.openjdk.java.net">Wiki</a></div></div><div class="links"><div class="links"><a href="/bylaws">Bylaws</a> &#183; <a href="/census">Census</a></div><div class="link"><a href="/legal/">Legal</a></div></div><div class="links"><div class="links"><a href="/jeps/0"><b>JEP Process</b></a></div></div><div class="links"><div class="link search"><form method="get" action="https://www.google.com/search"><input id="searchBox" style="color: gray" type="text" name="q" size="10" maxlength="255" value="search" /><input type="hidden" name="sitesearch" value="openjdk.java.net" /></form></div></div><div class="links"><div class="about">Source code</div><div class="link"><a href="//hg.openjdk.java.net">Mercurial</a></div><div class="link">Bundles (<a href="http://download.java.net/openjdk/jdk6">6</a>)</div></div><div class="links"><div class="about">Groups</div><div class="link"><a href="/groups/">(overview)</a></div><div class="link"><a href="/groups/2d">2D Graphics</a></div><div class="link"><a href="/groups/adoption">Adoption</a></div><div class="link"><a href="/groups/awt">AWT</a></div><div class="link"><a href="/groups/build">Build</a></div><div class="link"><a href="/groups/csr">Compatibility &amp; Specification Review</a></div><div class="link"><a href="/groups/compiler">Compiler</a></div><div class="link"><a href="/groups/conformance">Conformance</a></div><div class="link"><a href="/groups/core-libs">Core Libraries</a></div><div class="link"><a href="/groups/gb">Governing Board</a></div><div class="link"><a href="/groups/hotspot">HotSpot</a></div><div class="link"><a href="/groups/ide-support">IDE Tooling &amp; Support</a></div><div class="link"><a href="/groups/i18n">Internationalization</a></div><div class="link"><a href="/groups/jmx">JMX</a></div><div class="link"><a href="/groups/members">Members</a></div><div class="link"><a href="/groups/net">Networking</a></div><div class="link"><a href="/groups/nb-projects">NetBeans Projects</a></div><div class="link"><a href="/groups/porters">Porters</a></div><div class="link"><a href="/groups/quality">Quality</a></div><div class="link"><a href="/groups/security">Security</a></div><div class="link"><a href="/groups/serviceability">Serviceability</a></div><div class="link"><a href="/groups/sound">Sound</a></div><div class="link"><a href="/groups/swing">Swing</a></div><div class="link"><a href="/groups/vulnerability">Vulnerability</a></div><div class="link"><a href="/groups/web">Web</a></div></div><div class="links"><div class="about">Projects</div><div class="link"><a href="/projects/">(overview)</a></div><div class="link"><a href="/projects/amber">Amber</a></div><div class="link"><a href="/projects/anno-pipeline">Annotations Pipeline 2.0</a></div><div class="link"><a href="/projects/audio-engine">Audio Engine</a></div><div class="link"><a href="/projects/build-infra">Build Infrastructure</a></div><div class="link"><a href="/projects/caciocavallo">Caciocavallo</a></div><div class="link"><a href="/projects/closures">Closures</a></div><div class="link"><a href="/projects/code-tools">Code Tools</a></div><div class="link"><a href="/projects/coin">Coin</a></div><div class="link"><a href="/projects/cvmi">Common VM Interface</a></div><div class="link"><a href="/projects/compiler-grammar">Compiler Grammar</a></div><div class="link"><a href="/projects/detroit">Detroit</a></div><div class="link"><a href="/projects/dio">Device I/O</a></div><div class="link"><a href="/projects/duke">Duke</a></div><div class="link"><a href="/projects/font-scaler">Font Scaler</a></div><div class="link"><a href="/projects/fbtoolkit">Framebuffer Toolkit</a></div><div class="link"><a href="/projects/graal">Graal</a></div><div class="link"><a href="/projects/graphics-rasterizer">Graphics Rasterizer</a></div><div class="link"><a href="/projects/harfbuzz">HarfBuzz Integration</a></div><div class="link"><a href="/projects/icedtea">IcedTea</a></div><div class="link"><a href="/projects/jdk6">JDK 6</a></div><div class="link"><a href="/projects/jdk7">JDK 7</a></div><div class="link"><a href="/projects/jdk7u">JDK 7 Updates</a></div><div class="link"><a href="/projects/jdk8">JDK 8</a></div><div class="link"><a href="/projects/jdk8u">JDK 8 Updates</a></div><div class="link"><a href="/projects/jdk9">JDK 9</a></div><div class="link"><a href="/projects/jdk">JDK</a>
      (&#8230;
       <a href="/projects/jdk/12">12</a>,
       <a href="/projects/jdk/13">13</a>,
       <a href="/projects/jdk/14">14</a>)</div><div class="link"><a href="/projects/jdk-updates">JDK Updates</a></div><div class="link"><a href="/projects/javadoc-next">JavaDoc.Next</a></div><div class="link"><a href="/projects/jigsaw">Jigsaw</a></div><div class="link"><a href="/projects/kona">Kona</a></div><div class="link"><a href="/projects/kulla">Kulla</a></div><div class="link"><a href="/projects/lambda">Lambda</a></div><div class="link"><a href="/projects/lanai">Lanai</a></div><div class="link"><a href="/projects/locale-enhancement">Locale Enhancement</a></div><div class="link"><a href="/projects/loom">Loom</a></div><div class="link"><a href="/projects/jmm">Memory Model Update</a></div><div class="link"><a href="/projects/metropolis">Metropolis</a></div><div class="link"><a href="/projects/jmc">Mission Control</a></div><div class="link"><a href="/projects/mobile">Mobile</a></div><div class="link"><a href="/projects/modules">Modules</a></div><div class="link"><a href="/projects/mlvm">Multi-Language VM</a></div><div class="link"><a href="/projects/nashorn">Nashorn</a></div><div class="link"><a href="/projects/nio">New I/O</a></div><div class="link"><a href="/projects/openjfx">OpenJFX</a></div><div class="link"><a href="/projects/panama">Panama</a></div><div class="link"><a href="/projects/penrose">Penrose</a></div><div class="link"><a href="/projects/aarch32-port">Port: AArch32</a></div><div class="link"><a href="/projects/aarch64-port">Port: AArch64</a></div><div class="link"><a href="/projects/bsd-port">Port: BSD</a></div><div class="link"><a href="/projects/haiku-port">Port: Haiku</a></div><div class="link"><a href="/projects/macosx-port">Port: Mac OS X</a></div><div class="link"><a href="/projects/mips-port">Port: MIPS</a></div><div class="link"><a href="/projects/ppc-aix-port">Port: PowerPC/AIX</a></div><div class="link"><a href="/projects/s390x-port">Port: s390x</a></div><div class="link"><a href="/projects/portola">Portola</a></div><div class="link"><a href="/projects/sctp">SCTP</a></div><div class="link"><a href="/projects/skara">Skara</a></div><div class="link"><a href="/projects/shenandoah">Shenandoah</a></div><div class="link"><a href="/projects/sumatra">Sumatra</a></div><div class="link"><a href="/projects/threeten">ThreeTen</a></div><div class="link"><a href="/projects/tiered-attrib">Tiered Attribution</a></div><div class="link"><a href="/projects/tsan">Tsan</a></div><div class="link"><a href="/projects/type-annotations">Type Annotations</a></div><div class="link"><a href="/projects/xrender">XRender Pipeline</a></div><div class="link"><a href="/projects/valhalla">Valhalla</a></div><div class="link"><a href="/projects/verona">Verona</a></div><div class="link"><a href="/projects/visualvm">VisualVM</a></div><div class="link"><a href="/projects/zero">Zero</a></div><div class="link"><a href="/projects/zgc">ZGC</a></div></div><div class="links"><div class="about">Tools</div><div class="link"><a href="http://java.sun.com/javase/downloads/index.jsp">Java SE</a></div><div class="link"><a href="http://mercurial-scm.org/mercurial/">Mercurial</a></div><div class="link"><a href="/jtreg/index.html">jtreg harness</a></div></div><div class="links"><div class="about">Related</div><div class="link"><a href="http://planetjdk.org">Planet JDK</a></div><div class="link"><a href="http://java.sun.com">java.sun.com</a></div><div class="link"><a href="http://jcp.org">Java Community Process</a></div><div class="link"><a href="//jdk.java.net">JDK GA/EA Builds</a></div></div><div class="buttons"><a href="http://oracle.com"><img alt="Oracle logo" src="/images/oracle.png" /></a></div></div><div id="footer">

        &#169; 2019 Oracle Corporation and/or its affiliates
        <br /><a href="/legal/tou/">Terms of Use</a>
        &#183;
        
            License: <a href="/legal/gplv2+ce.html">GPLv2</a>
        &#183; <a href="http://www.oracle.com/us/legal/privacy/">Privacy</a>
        &#183; <a href="http://www.oracle.com/us/legal/third-party-trademarks/third-party-trademarks-078568.html">Trademarks</a></div><SCRIPT type="text/javascript">
  var sc_project=2527440;
  var sc_invisible=1;
  var sc_partition=24;
  var sc_security="d832a704";
  var sc_remove_link=1;
  </SCRIPT><script type="text/javascript" src="https://www.statcounter.com/counter/counter_xhtml.js" async="yes"></script><noscript><div class="statcounter"><img class="statcounter" src="https://c.statcounter.com/2527440/0/d832a704/1/" alt="web statistics" /></div></noscript></body></html>
