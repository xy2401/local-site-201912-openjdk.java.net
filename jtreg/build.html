<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=us-ascii" /><meta http-equiv="Content-Type" content="text/html; charset=us-ascii" /><title>Building &#8216;jtreg&#8217;</title><link rel="shortcut icon" href="../images/nanoduke.ico" /><link rel="stylesheet" type="text/css" href="../page.css" /><script type="text/javascript" src="../page.js"><noscript></noscript></script></head><body><div id="main">
<h1>Building <code>jtreg</code></h1>
<p>The source code for <code>jtreg</code> is available from the
OpenJDK Mercurial repository at <a href="//hg.openjdk.java.net/code-tools/jtreg">http://hg.openjdk.java.net/code-tools/jtreg</a>.</p>
<p><code>jtreg</code> depends on a number of external components:
<a href="https://wiki.openjdk.java.net/display/CodeTools/JT+Harness">JT
Harness</a>, <a href="http://testng.org/">TestNG</a>, <a href="http://junit.org/">JUnit</a>, <a href="https://wiki.openjdk.java.net/display/CodeTools/asmtools">AsmTools</a>.
<a href="http://http://ant.apache.org/">Ant</a>, and <a href="https://wiki.openjdk.java.net/display/CodeTools/jcov">JCov</a>.</p>
<p>The fundamental way to build <code>jtreg</code> is with GNU
make, specifying where to find those external components, but a
script is also available that will download appropriate copies of
those components before building <code>jtreg</code>.</p>
<h2>Building jtreg with the <i>build-all.sh</i> script</h2>
<p>This is the recommended way to build <code>jtreg</code>, for
those that want a simple, basic way to build
<code>jtreg</code>.</p>
<p>The script is intended to be run in a Unix-like shell, such as
bash on Linux or MacOS, or with Cygwin on Windows. It takes one
argument which is the installation of JDK to be used to build
<code>jtreg</code>. In addition, Ant must be on your execution path
as well as a suitable version of Java to run Ant. The version of
JDK must be either JDK 7 or JDK 8.</p>
<pre>    
    % cd <i>jtreg-root-directory</i>
    % sh make/build-all.sh <i>JDK-directory</i>
</pre>
<p>The script will create a <i>build</i> sub-directory, download
and build dependencies, and finally build <code>jtreg</code>
itself. The resulting image will be in
<i>build/images/jtreg</i>.</p>
<h2>Building <code>jtreg</code> with GNU Make</h2>
<p>The Makefile is in <code>make/Makefile</code>, and creates
deliverables in the <code>build/</code> directory, similar to
OpenJDK. By default, the build file just builds an image for
<code>jtreg</code>. You can build <code>jtreg</code> from a
Unix-like command shell with the following commands:</p>
<pre>    
    % cd <i>jtreg-root-directory</i>
    % make -C make
</pre>
<h4>Dependencies</h4>
<p><code>jtreg</code> has a number of build dependencies. These can
be set with values on the make command line or with values in
<code>make/Defs.gmk</code>. You can also include the appropriate
license files in the <code>jtreg</code> image, by setting the
appropriate make variables. These are documented in
<code>make/Defs.gmk</code></p>
<dl>
<dt>JDK 1.7 (or better)</dt>
<dd>
<p>Set <code>JDKHOME</code> to the JDK or equivalent used to build
<code>jtreg</code>. It must be equivalent to JDK 1.7 or later.</p>
</dd>
<dt>JT Harness</dt>
<dd>
<p>See <a href="https://wiki.openjdk.java.net/display/CodeTools/JT+Harness">https://wiki.openjdk.java.net/display/CodeTools/JT+Harness</a>.<br />

Set <code>JTHARNESS_HOME</code> to the installed copy of the
version of JT Harness to be used. It should be version 5.0 or
better.</p>
</dd>
<dt>Ant</dt>
<dd>
<p>See <a href="http://ant.apache.org/">http://ant.apache.org/</a>.
Set <code>ANTHOME</code> to an installed copy of Ant. It should be
version 1.9.x. or better.</p>
</dd>
<dt>AsmTools</dt>
<dd>
<p>See <a href="https://wiki.openjdk.java.net/display/CodeTools/asmtools">https://wiki.openjdk.java.net/display/CodeTools/asmtools</a>.<br />

Set <code>ASMTOOLS_HOME</code> to the installed copy of the version
of AsmTools to be used. It should be version 6.0 or better.</p>
<p><b>Note:</b> Do not confuse this component with <i>ASM bytecode
engineering library</i> available at <a href="http://asm.ow2.org/">http://asm.ow2.org/</a></p>
</dd>
<dt>JUnit</dt>
<dd>
<p>See <a href="http://junit.org/">http://junit.org/</a>. The
recommended version is currently JUnit 4.10.</p>
</dd>
<dt>TestNG</dt>
<dd>
<p>See <a href="http://testng.org/">http://testng.org/</a>. The
recommended version is currently 6.9.5.</p>
</dd>
</dl>
<p>The following dependencies are optional.</p>
<dl>
<dt>JCov</dt>
<dd>
<p>See <a href="https://wiki.openjdk.java.net/display/CodeTools/jcov">https://wiki.openjdk.java.net/display/CodeTools/jcov</a>.<br />

Set <code>JCOV_HOME</code> to the installed copy of the version of
JCov to be used. It should be version 2.0 or better.</p>
</dd>
<dt>JDK 1.5</dt>
<dd>
<p>This is used when running some of the tests. Set
<code>JDK15HOME</code> to run these tests. It need not be set if
you are just building <code>jtreg</code>.</p>
</dd>
<dt>JDK 1.6</dt>
<dd>
<p>This is used when running some of the tests. Set
<code>JDK16HOME</code> to run these tests. It need not be set if
you are just building <code>jtreg</code>.</p>
</dd>
<dt>JDK 1.7</dt>
<dd>
<p>This is used when running some of the tests. Set
<code>JDK17HOME</code> to run these tests. It need not be set if
you are just building <code>jtreg</code>.</p>
</dd>
<dt>JDK 1.8</dt>
<dd>
<p>This is used when running some of the tests. Set
<code>JDK18HOME</code> to run these tests. It need not be set if
you are just building <code>jtreg</code>.</p>
</dd>
<dt>JDK 1.9</dt>
<dd>
<p>This is used when running some of the tests. Set
<code>JDK19HOME</code> to run these tests. It need not be set if
you are just building <code>jtreg</code>.</p>
</dd>
</dl>
<h4>Running jtreg Self-Tests</h4>
<p>The tests can be invoked with individual make targets, or
collectively via the "test" target.</p>
<p>Some of the tests need to pop up windows while they execute. No
interaction with these windows is normally required. Since this can
be a problem on a headless server machine, and an annoyance on a
personal workstation, the tests will attempt to use VNC to create a
dummy X-server for use by the tests while they are running. Various
implementations of VNC are available, such as from <a href="http://www.realvnc.com/">http://www.realvnc.com/</a>. Using VNC is
optional; it is not required in order to run the tests.</p>
<p>By default, VNC will be used if vncserver is found on your
execution path, or if <code>VNC_HOME</code> points to an installed
copy of VNC. To explicitly disable the use of VNC, set the VNC
environment variable to one of false, off, no, or 0. Unless
explicitly disabled, the tests will check the following:</p>
<ul>
<li>You must have a password set in $HOME/.vnc/passwd. This is the
standard location used by the vncserver command.</li>
<li>If you set the environment variable VNC_HOME, it will be
prepended to your execution path to find vncserver.</li>
<li>vncserver must be on your execution path, after VNC_HOME has
been added, if set.</li>
</ul>
<p>If the tests find any issue with using VNC, it will not be used.
If VNC is used to create a dummy X server, the server will be
terminated when the test is complete.</p>
<p>The logic for using VNC is encapsulated within the script
<code>make/display.sh</code>.</p>
<h2>Building <code>jtreg</code> with Ant</h2>
<p>It is possible to build <code>jtreg</code> with Ant, but this is
primarily intended as a convenience while working on the
<code>jtreg</code> source code. If you are building
<code>jtreg</code> to run OpenJDK tests, it is recommended that you
build <code>jtreg</code> using the Makefile, perhaps via the
build-all.sh wrapper script.</p>
<p>The build file is in <code>make/build.xml</code>; it creates
intermediate files in the <code>build/</code> directory and
deliverables in the <code>dist/</code> directory. By default, the
build file just builds <code>jtreg</code>, but does not run any
tests. You can build <code>jtreg</code> from a Unix-like command
shell with the following commands:</p>
<pre>
    % cd jtreg-root-directory
    % ant -f make/build.xml
</pre>
<p>You can also use this build file when creating a <a href="www.netbeans.org">NetBeans</a> free form project with an existing
build file.</p>
<h4>Dependencies</h4>
<p>Some of the tasks that are used are listed as "Optional Tasks"
in the Ant manual. You may need to make sure that these tasks are
available for use by Ant. For example, on Ubuntu Linux these tasks
are in the ant-optional package.</p>
<h4>Running Tests</h4>
<p>Some of the tests can be invoked with individual targets
beginning "-jtreg-test-", or collectively via the "jtreg-test"
target. (The use of "jtreg-test" rather than "test" is to protect
against interactions with JUnit in older versions of NetBeans.)</p>
</div><div id="sidebar"><div id="openjdk-sidebar-logo"><a href="/"><img alt="OpenJDK logo" src="../images/openjdk-small.png" /></a></div><div class="links"><div class="links"><a href="/workshop"><b>Workshop</b></a></div></div><div class="links"><div class="link"><a href="/faq/">OpenJDK FAQ</a></div><div class="link"><a href="/install/">Installing</a></div><div class="link"><a href="/contribute/">Contributing</a></div><div class="link"><a href="/sponsor/">Sponsoring</a></div><div class="link"><a href="/guide/">Developers' Guide</a></div><div class="link"><a href="/groups/vulnerability/report">Vulnerabilities</a></div></div><div class="links"><div class="links"><a href="//mail.openjdk.java.net">Mailing lists</a></div><div class="link"><a href="/irc">IRC</a>
                      &#183; <a href="https://wiki.openjdk.java.net">Wiki</a></div></div><div class="links"><div class="links"><a href="/bylaws">Bylaws</a> &#183; <a href="/census">Census</a></div><div class="link"><a href="/legal/">Legal</a></div></div><div class="links"><div class="links"><a href="/jeps/0"><b>JEP Process</b></a></div></div><div class="links"><div class="link search"><form method="get" action="https://www.google.com/search"><input id="searchBox" style="color: gray" type="text" name="q" size="10" maxlength="255" value="search" /><input type="hidden" name="sitesearch" value="openjdk.java.net" /></form></div></div><div class="links"><div class="about">Source code</div><div class="link"><a href="//hg.openjdk.java.net">Mercurial</a></div><div class="link">Bundles (<a href="http://download.java.net/openjdk/jdk6">6</a>)</div></div><div class="links"><div class="about">Groups</div><div class="link"><a href="/groups/">(overview)</a></div><div class="link"><a href="/groups/2d">2D Graphics</a></div><div class="link"><a href="/groups/adoption">Adoption</a></div><div class="link"><a href="/groups/awt">AWT</a></div><div class="link"><a href="/groups/build">Build</a></div><div class="link"><a href="/groups/csr">Compatibility &amp; Specification Review</a></div><div class="link"><a href="/groups/compiler">Compiler</a></div><div class="link"><a href="/groups/conformance">Conformance</a></div><div class="link"><a href="/groups/core-libs">Core Libraries</a></div><div class="link"><a href="/groups/gb">Governing Board</a></div><div class="link"><a href="/groups/hotspot">HotSpot</a></div><div class="link"><a href="/groups/ide-support">IDE Tooling &amp; Support</a></div><div class="link"><a href="/groups/i18n">Internationalization</a></div><div class="link"><a href="/groups/jmx">JMX</a></div><div class="link"><a href="/groups/members">Members</a></div><div class="link"><a href="/groups/net">Networking</a></div><div class="link"><a href="/groups/nb-projects">NetBeans Projects</a></div><div class="link"><a href="/groups/porters">Porters</a></div><div class="link"><a href="/groups/quality">Quality</a></div><div class="link"><a href="/groups/security">Security</a></div><div class="link"><a href="/groups/serviceability">Serviceability</a></div><div class="link"><a href="/groups/sound">Sound</a></div><div class="link"><a href="/groups/swing">Swing</a></div><div class="link"><a href="/groups/vulnerability">Vulnerability</a></div><div class="link"><a href="/groups/web">Web</a></div></div><div class="links"><div class="about">Projects</div><div class="link"><a href="/projects/">(overview)</a></div><div class="link"><a href="/projects/amber">Amber</a></div><div class="link"><a href="/projects/anno-pipeline">Annotations Pipeline 2.0</a></div><div class="link"><a href="/projects/audio-engine">Audio Engine</a></div><div class="link"><a href="/projects/build-infra">Build Infrastructure</a></div><div class="link"><a href="/projects/caciocavallo">Caciocavallo</a></div><div class="link"><a href="/projects/closures">Closures</a></div><div class="link"><a href="/projects/code-tools">Code Tools</a></div><div class="link"><a href="/projects/coin">Coin</a></div><div class="link"><a href="/projects/cvmi">Common VM Interface</a></div><div class="link"><a href="/projects/compiler-grammar">Compiler Grammar</a></div><div class="link"><a href="/projects/detroit">Detroit</a></div><div class="link"><a href="/projects/dio">Device I/O</a></div><div class="link"><a href="/projects/duke">Duke</a></div><div class="link"><a href="/projects/font-scaler">Font Scaler</a></div><div class="link"><a href="/projects/fbtoolkit">Framebuffer Toolkit</a></div><div class="link"><a href="/projects/graal">Graal</a></div><div class="link"><a href="/projects/graphics-rasterizer">Graphics Rasterizer</a></div><div class="link"><a href="/projects/harfbuzz">HarfBuzz Integration</a></div><div class="link"><a href="/projects/icedtea">IcedTea</a></div><div class="link"><a href="/projects/jdk6">JDK 6</a></div><div class="link"><a href="/projects/jdk7">JDK 7</a></div><div class="link"><a href="/projects/jdk7u">JDK 7 Updates</a></div><div class="link"><a href="/projects/jdk8">JDK 8</a></div><div class="link"><a href="/projects/jdk8u">JDK 8 Updates</a></div><div class="link"><a href="/projects/jdk9">JDK 9</a></div><div class="link"><a href="/projects/jdk">JDK</a>
      (&#8230;
       <a href="/projects/jdk/12">12</a>,
       <a href="/projects/jdk/13">13</a>,
       <a href="/projects/jdk/14">14</a>)</div><div class="link"><a href="/projects/jdk-updates">JDK Updates</a></div><div class="link"><a href="/projects/javadoc-next">JavaDoc.Next</a></div><div class="link"><a href="/projects/jigsaw">Jigsaw</a></div><div class="link"><a href="/projects/kona">Kona</a></div><div class="link"><a href="/projects/kulla">Kulla</a></div><div class="link"><a href="/projects/lambda">Lambda</a></div><div class="link"><a href="/projects/lanai">Lanai</a></div><div class="link"><a href="/projects/locale-enhancement">Locale Enhancement</a></div><div class="link"><a href="/projects/loom">Loom</a></div><div class="link"><a href="/projects/jmm">Memory Model Update</a></div><div class="link"><a href="/projects/metropolis">Metropolis</a></div><div class="link"><a href="/projects/jmc">Mission Control</a></div><div class="link"><a href="/projects/mobile">Mobile</a></div><div class="link"><a href="/projects/modules">Modules</a></div><div class="link"><a href="/projects/mlvm">Multi-Language VM</a></div><div class="link"><a href="/projects/nashorn">Nashorn</a></div><div class="link"><a href="/projects/nio">New I/O</a></div><div class="link"><a href="/projects/openjfx">OpenJFX</a></div><div class="link"><a href="/projects/panama">Panama</a></div><div class="link"><a href="/projects/penrose">Penrose</a></div><div class="link"><a href="/projects/aarch32-port">Port: AArch32</a></div><div class="link"><a href="/projects/aarch64-port">Port: AArch64</a></div><div class="link"><a href="/projects/bsd-port">Port: BSD</a></div><div class="link"><a href="/projects/haiku-port">Port: Haiku</a></div><div class="link"><a href="/projects/macosx-port">Port: Mac OS X</a></div><div class="link"><a href="/projects/mips-port">Port: MIPS</a></div><div class="link"><a href="/projects/ppc-aix-port">Port: PowerPC/AIX</a></div><div class="link"><a href="/projects/s390x-port">Port: s390x</a></div><div class="link"><a href="/projects/portola">Portola</a></div><div class="link"><a href="/projects/sctp">SCTP</a></div><div class="link"><a href="/projects/skara">Skara</a></div><div class="link"><a href="/projects/shenandoah">Shenandoah</a></div><div class="link"><a href="/projects/sumatra">Sumatra</a></div><div class="link"><a href="/projects/threeten">ThreeTen</a></div><div class="link"><a href="/projects/tiered-attrib">Tiered Attribution</a></div><div class="link"><a href="/projects/tsan">Tsan</a></div><div class="link"><a href="/projects/type-annotations">Type Annotations</a></div><div class="link"><a href="/projects/xrender">XRender Pipeline</a></div><div class="link"><a href="/projects/valhalla">Valhalla</a></div><div class="link"><a href="/projects/verona">Verona</a></div><div class="link"><a href="/projects/visualvm">VisualVM</a></div><div class="link"><a href="/projects/zero">Zero</a></div><div class="link"><a href="/projects/zgc">ZGC</a></div></div><div class="links"><div class="about">Tools</div><div class="link"><a href="http://java.sun.com/javase/downloads/index.jsp">Java SE</a></div><div class="link"><a href="http://mercurial-scm.org/mercurial/">Mercurial</a></div><div class="link"><a href="/jtreg/index.html">jtreg harness</a></div></div><div class="links"><div class="about">Related</div><div class="link"><a href="http://planetjdk.org">Planet JDK</a></div><div class="link"><a href="http://java.sun.com">java.sun.com</a></div><div class="link"><a href="http://jcp.org">Java Community Process</a></div><div class="link"><a href="//jdk.java.net">JDK GA/EA Builds</a></div></div><div class="buttons"><a href="http://oracle.com"><img alt="Oracle logo" src="../images/oracle.png" /></a></div></div><div id="footer">

        &#169; 2019 Oracle Corporation and/or its affiliates
        <br /><a href="/legal/tou/">Terms of Use</a>
        &#183;
        
            License: <a href="/legal/gplv2+ce.html">GPLv2</a>
        &#183; <a href="http://www.oracle.com/us/legal/privacy/">Privacy</a>
        &#183; <a href="http://www.oracle.com/us/legal/third-party-trademarks/third-party-trademarks-078568.html">Trademarks</a></div><SCRIPT type="text/javascript">
  var sc_project=2527440;
  var sc_invisible=1;
  var sc_partition=24;
  var sc_security="d832a704";
  var sc_remove_link=1;
  </SCRIPT><script type="text/javascript" src="https://www.statcounter.com/counter/counter_xhtml.js" async="yes"></script><noscript><div class="statcounter"><img class="statcounter" src="https://c.statcounter.com/2527440/0/d832a704/1/" alt="web statistics" /></div></noscript></body></html>
